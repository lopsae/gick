#!/bin/bash

# Using the pick command prints the matching files that appear in git status.

if [[ $# = 0 ]]; then
	echo 'No parameters given' >&2
	exit 1
fi

# We search only in the filenames returned by status
matches=$(git status --porcelain | cut -c 4- | pick $@ 2>/dev/null)
if [[ $? != 0 ]]; then
	echo 'No files found' >&2
	exit 2
fi

relativePath=$(git rev-parse --show-cdup)
for match in $matches; do
	echo "$relativePath$match"
done

