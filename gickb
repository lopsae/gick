#!/bin/bash

# Prints the first matching line from the git branches

# By default it seeks for a match in the local branches, if -r is
# provided, it prints the first matching branch on remote branches. 

params=`getopt r $*`
paramsCode=$?
set -- $params

if [[ $paramsCode != 0 ]]; then
	echo 'Incorrect parameters given' >&2
	exit 1
fi

useRemotes=false

for param; do
	case "$param" in
		-r)
			useRemotes=true
			shift;;
		--)
			shift; break;;
	esac
done

if [[ $# = 0 ]]; then
	echo 'No parameters given' >&2
	exit 2
fi

if [[ $useRemotes = true ]]; then
	branches=`git branch -r`
else
	branches=`git branch`
fi

# There are three empty characters at the start of each line
echo "$branches" | cut -c 3- | pick $@

